---
title: "JijPresolve: OMMX-based Presolver"
emoji: "ğŸ™†"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["æ•°ç†æœ€é©åŒ–", "Presolve", "OMMX"]
published: true
publication_name: "jij_inc"
---

# Presolveã¨ã¯

Presolveã¯æ•°ç†æœ€é©åŒ–å•é¡Œã‚’ã‚½ãƒ«ãƒãƒ¼ã«æŠ•ã’ã‚‹å‰ã«å•é¡Œã‚’ç°¡ç•¥åŒ–ã™ã‚‹ãŸã‚ã®å‰å‡¦ç†æŠ€è¡“ã§ã™ã€‚

ã‚ˆãçŸ¥ã‚‰ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«æ•´æ•°ã‚’å«ã‚€ç·šå½¢è¨ˆç”»å•é¡Œ(MILP)ã§ã™ã‚‰NPå›°é›£ã§ã‚ã‚Šã€å•é¡Œã®è¦æ¨¡ãŒå¤§ãããªã‚‹ã¨æ±ç”¨ã‚½ãƒ«ãƒãƒ¼ã§ã¯è§£ãã®ãŒéå¸¸ã«é›£ã—ããªã‚Šã¾ã™ã€‚ã—ã‹ã—ã“ã‚Œã¯ã€Œã©ã‚“ãªMILPãŒæ¥ã¦ã‚‚é«˜é€Ÿã«è§£ãã“ã¨ãŒã§ãã‚‹ã€ã¨ã„ã†æ±ç”¨ã‚½ãƒ«ãƒãƒ¼ãŒãªã„ã¨ã„ã†æ„å‘³ã§ã‚ã‚Šã€å€‹ã€…ã®MILPå•é¡ŒãŒå®Ÿéš›ã«è§£ãã®ãŒé›£ã—ã„ã®ã‹ã¯åˆ¥å•é¡Œã§ã™ã€‚ã¤ã¾ã‚Šå•é¡Œå›ºæœ‰ã®æƒ…å ±ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦å¤§è¦æ¨¡ãªå•é¡Œã§ã‚ã£ã¦ã‚‚é«˜é€Ÿã«è§£ã‘ã‚‹ã‚±ãƒ¼ã‚¹ã¨ã„ã†ã®ãŒå­˜åœ¨ã—ã¾ã™ã€‚å•é¡Œå›ºæœ‰ã®æƒ…å ±ã‚’æ´»ç”¨ã™ã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«ã¯ã„ãã¤ã‹ã‚ã‚Šã€ä»£è¡¨çš„ãªã‚‚ã®ã¯æ¬¡ã®é€šã‚Šã§ã™ã€‚

- Presolve ã«ã‚ˆã‚‹å•é¡Œã®ç°¡ç•¥åŒ–
- ã‚ˆã‚Šå°ã•ã„å•é¡Œã«å¯¾ã™ã‚‹çµæœã‚’ä½¿ã£ã¦å…ƒã®å•é¡Œã®è§£ã‚’å¾—ã‚‹åˆ†å‰²æ‰‹æ³•ï¼ˆåˆ—ç”Ÿæˆæ³•ç­‰ï¼‰
- å•é¡Œç‰¹åŒ–å‹ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ã‚¯ã‚¹ï¼ˆTSPå°‚ç”¨ã‚½ãƒ«ãƒãƒ¼ç­‰ï¼‰

ã“ã®è¨˜äº‹ã§ã¯Presolveã«ã¤ã„ã¦ç°¡å˜ã«è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚Presolveã¯å•é¡Œåˆ†å‰²æ‰‹æ³•ã‚„ã‚ã‚‹ã„ã¯ã‚½ãƒ«ãƒãƒ¼æœ¬ä½“ã®ä¸€éƒ¨ã¨ã—ã¦ã‚‚æ´»ç”¨ã•ã‚Œã‚‹éå¸¸ã«åŸºç¤çš„ãªæŠ€è¡“ã§ã™ã€‚Presolveã¯å˜ä¸€ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒã‚ã‚‹ã‚ã‘ã§ã¯ãªãã¦ã€å¤šæ•°ã®ç‰¹åŒ–çš„ãªæ‰‹æ³•ã®é›†åˆã§ã™ã€‚ä¸»ãªç›®çš„ã¨ã—ã¦ã¯æ¬¡ã®äºŒã¤ã§ã™

- æ±ºå®šå¤‰æ•°ã®æ•°ã‚’æ¸›ã‚‰ã™ã€æ±ºå®šå¤‰æ•°ã®å–ã‚Šã†ã‚‹å€¤ã®ç¯„å›²ã‚’ç‹­ã‚ã‚‹
- ã‚ˆã‚Šå¼·ã„å®ŸåŠ¹çš„ãªåˆ¶ç´„ã‚’è¿½åŠ ã—ã¦æ¢ç´¢ç©ºé–“ã‚’ç‹­ã‚ã‚‹ã€ä¸è¦ãªåˆ¶ç´„ã‚’å‰Šé™¤ã™ã‚‹

ç‰¹ã«MILPã¯æ±ºå®šå¤‰æ•°ã®å€‹æ•°ã«å¯¾ã—ã¦æŒ‡æ•°çš„ã«è¨ˆç®—é‡ãŒå¢—åŠ ã™ã‚‹ãŸã‚ã€æ±ºå®šå¤‰æ•°ã®æ•°ã‚’æ¸›ã‚‰ã™ã“ã¨ã¯éå¸¸ã«é‡è¦ã§ã™ã€‚

## Bound strengthening

ã¾ãšã¯ã‚ã‹ã‚Šã‚„ã™ã„å˜ç´”ãªä¾‹ã‹ã‚‰å§‹ã‚ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ãªMILPã‚’è€ƒãˆã¾ã™ã€‚

$$
\begin{align*}
\text{maximize} \quad & x_1 + x_2 \\
\text{subject to} \quad & 2x_1 + 3x_2 \leq 12 \\
& x_1, x_2 \geq 0 \\
& x_1, x_2 \in \mathbb{Z}
\end{align*}
$$

$x_1$ ã‚‚ $x_2$ ã‚‚éè² æ•´æ•°ã§ã™ãŒä¸Šç•ŒãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã—ã‹ã—åˆ¶ç´„æ¡ä»¶ã‹ã‚‰

$$
x_1 \leq \frac{1}{2} \left( 12 - 3 x_2 \right) \leq 6 \quad (\because x_2 \geq 0)
$$

ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã€åŒæ§˜ã« $x_2 \leq 4$ ã‚‚ã‚ã‹ã‚Šã¾ã™ã€‚ãªã®ã§ã“ã® MILP ã¯ã‚ˆã‚Šå®šç¾©åŸŸã®ç‹­ã„æ¬¡ã®å•é¡Œã«ç½®ãæ›ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

$$
\begin{align*}
\text{maximize} \quad & x_1 + x_2 \\
\text{subject to} \quad & 2x_1 + 3x_2 \leq 12 \\
& x_1 \in [0, 6] \cap \mathbb{Z}, x_2 \in [0, 4] \cap \mathbb{Z}
\end{align*}
$$

ã“ã‚Œã¯ç‰¹ã«åˆ¶ç´„æ¡ä»¶ãŒç·šå½¢ã®å ´åˆã¯ä¿‚æ•°ã®ç¬¦å·ã«ã‚ˆã£ã¦æœ€å°å€¤ã‹æœ€å¤§å€¤ã‚’å–ã£ã¦ãã‚Œã°ã„ã„ã ã‘ãªã®ã§é«˜é€Ÿã«è¨ˆç®—ã§ãã¾ã™ã€‚ã“ã‚Œã¯ã‚ˆã‚Šå¼·ã„Boundã‚’è¨­å®šã™ã‚‹ã¨ã„ã†æ„å‘³ã§ "Bound strengthening" ã¨å‘¼ã°ã‚Œã¾ã™ã€‚

:::message
å¾Œè¿°ã™ã‚‹JijPresolveã§ã¯éç·šå½¢é …ã«å¯¾ã—ã¦ã‚‚åŒºé–“æ¼”ç®—ã‚’ä½¿ã£ã¦Bound strengtheningã‚’è¡Œã„ã¾ã™
:::

å°‘ã—åˆ¥ã®è¦–ç‚¹ã‹ã‚‰è¦‹ã‚‹ã¨ã€ã“ã®æ‰‹ç¶šãã¯Boundã‚’ä½¿ã£ã¦Boundã‚’å¼·åŒ–ã—ã¦ã„ã‚‹ã“ã¨ã‹ã‚‰ "Domain propagation" ã¨ã‚‚å‘¼ã°ã‚Œã¾ã™ã€‚ä»–ã®ã€ã‚ˆã‚Šå•é¡Œç‰¹åŒ–ãªPresolveã«ã‚ˆã£ã¦å¾—ã‚‰ã‚ŒãŸã‚ˆã‚Šå¼·ã„Boundã‚’ä½¿ã£ã¦ä»–ã®å¤‰æ•°ã®Boundã‚‚å¼·åŒ–ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€ä»–ã®Presolveã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã‚ˆã‚Šå¼·åŠ›ãªåŠ¹æœã‚’ç™ºæ®ã—ã¾ã™ã€‚ã“ã®ã‚ˆã†ã«Presolveã¯è¤‡æ•°ã®æ“ä½œã‚’çµ„ã¿åˆã‚ã›ã¦å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒåŸºæœ¬ã¨ãªã‚Šã¾ã™ã€‚

## Coefficient strengthening

Presolveã®æ‰‹æ³•ã¯è†¨å¤§ãªã®ã§ç¶²ç¾…çš„ã«èª¬æ˜ã™ã‚‹ã®ã¯é›£ã—ã„ã§ã™ã€‚MILPã®Presolveã«é™ã£ã¦ã‚‚ã„ãã¤ã‹Presolveã®ã‚¯ãƒ©ã‚¹ãŒå­˜åœ¨ã—ã¦

- å˜ä¸€ã®åˆ¶ç´„æ¡ä»¶ã§å®Œçµã™ã‚‹ã‚‚ã®
- è¤‡æ•°ã®åˆ¶ç´„æ¡ä»¶ã‚’çµ„ã¿åˆã‚ã›ã¦å®Ÿè¡Œã™ã‚‹ã‚‚ã®
- åˆ¶ç´„æ¡ä»¶ã«åŠ ãˆã¦ç›®çš„é–¢æ•°ã‚‚æ´»ç”¨ã™ã‚‹ã‚‚ã® (dual presolve)

ãŒã‚ã‚Šã¾ã™ã€‚å…ˆã»ã©ã®ä¾‹ã§ã¯å˜ä¸€ã®åˆ¶ç´„æ¡ä»¶ã‹ã‚‰Bound strengtheningã‚’è¡Œã†æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã—ãŸãŒã€ã‚‚ã†ä¸€ã¤åŸºæœ¬çš„ãªå˜ä¸€ã®åˆ¶ç´„æ¡ä»¶ã§å®Œçµã™ã‚‹Presolveã‚’ç´¹ä»‹ã—ã¾ã—ã‚‡ã†ã€‚

Coefficient strengtheningã¨ã„ã†ã®ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚ã“ã‚Œã¯ã‚ã‚‹åˆ¶ç´„æ¡ä»¶ã«å¯¾ã—ã¦ãã“ã«å«ã¾ã‚Œã‚‹æ±ºå®šå¤‰æ•°ãŒæ•´æ•°ã®ã¿ã®æ™‚ã€feasibleãªæ•´æ•°ã‚’å¤‰åŒ–ã•ã›ãšã«ä¿‚æ•°ã«ã‚ˆã‚‹åˆ¶ç´„ï¼ˆã¤ã¾ã‚ŠLPç·©å’Œã—ãŸæ™‚ã®feasibleé ˜åŸŸï¼‰ã‚’å°ã•ãã™ã‚‹äº‹ãŒã§ãã‚‹æ‰‹æ³•ã§ã™ã€‚æ•´æ•°ç·šå½¢è¨ˆç”»ã‚½ãƒ«ãƒãƒ¼ã§ã¯LPç·©å’Œå•é¡Œï¼ˆæ•´æ•°å¤‰æ•°ã‚’å®Ÿæ•°å¤‰æ•°ã¨ã—ã¦æ‰±ã†å•é¡Œï¼‰ã‚’è§£ãã€ãã®çµæœã‚’å…ƒã«åˆ†æé™å®šæ³•(branch-and-bound)ãªã©ã®æ‰‹æ³•ã§æ•´æ•°è§£ã‚’æ¢ç´¢ã—ã¾ã™ã€‚LPç·©å’Œå•é¡Œã®feasibleé ˜åŸŸãŒå°ã•ã‘ã‚Œã°å°ã•ã„ã»ã©ã€åˆ†æé™å®šæ³•ã§æ¢ç´¢ã™ã‚‹å¿…è¦ã®ã‚ã‚‹é ˜åŸŸãŒå°ã•ããªã‚‹ãŸã‚ã€Coefficient strengtheningã¯æ•´æ•°ç·šå½¢è¨ˆç”»ã‚½ãƒ«ãƒãƒ¼ã®æ€§èƒ½å‘ä¸Šã«å¯„ä¸ã—ã¾ã™ã€‚

ç°¡å˜ã®ãŸã‚2å¤‰æ•° $x, y \in \mathbb{Z}$ ã§èª¬æ˜ã—ã¾ã™ã€‚å®Ÿæ•°ä¿‚æ•° $a, b > 0$ ã¨ã—ã¦æ¬¡ã®ã‚ˆã†ãªåˆ¶ç´„æ¡ä»¶ã‚’è€ƒãˆã¾ã™ã€‚

$$
a x + b y \leq c
$$

$x$ ã«ã¤ã„ã¦ã®coefficient strengthenã¨ã„ã†ã®ã¯ $x$ ã®æœ€å¤§å€¤ $\bar{x} \in \mathbb{Z}$ ã¨ $ax$ ä»¥å¤–ã®å·¦è¾ºé … $by$ ï¼ˆä»Šã¯ï¼‘é …ã ã‘ã ãŒå¤‰æ•°ãŒå¢—ãˆã‚‹ã¨å¢—ãˆã‚‹ï¼‰ã®ä¸Šé™ãŒ $by \leq u$ ã®ã‚ˆã†ã«ä¸ãˆã‚‰ã‚ŒãŸæ™‚ã€ $a, c$ ã®çµ„ã‚’æ›´æ–°ã—ã¦feasibleãªæ•´æ•°ç‚¹ã‚’ç¶­æŒã—ãŸã¾ã¾LPç·©å’Œã—ãŸæ™‚ã®é ˜åŸŸã‚’å‰Šã‚‹æ–¹æ³•ã§ã™ã€‚

![](/images/coefficient_strengthening.png)

ä»Šã®åˆ¶ç´„æ¡ä»¶ $ax + by \leq c$ ã«ç›¸å½“ã™ã‚‹èµ¤ã„ç·šã‚’ã€æ–°ã—ã„åˆ¶ç´„æ¡ä»¶ $a'x + by \leq c'$ ã«ç›¸å½“ã™ã‚‹é’ã„ç·šã«ç½®ãæ›ãˆã¾ã™ã€‚å¤‰æ›´å‰ã®LPç·©å’Œã®å®Ÿè¡Œå¯èƒ½é ˜åŸŸãŒå›³ä¸­ã®ãƒãƒƒãƒé ˜åŸŸï¼ˆ$x \leq \bar{x}, y \leq u/b$ï¼‰ã§ã€å¤‰æ›´å¾Œã¯å›³ä¸­ã®ç·‘ã®ãƒãƒƒãƒéƒ¨åˆ†ãŒå®Ÿè¡Œå¯èƒ½é ˜åŸŸã‹ã‚‰å®‰å…¨ã«å‰Šé™¤ã§ãã‚‹ã¨ã„ã†æ‰‹ç¶šãã§ã™ã€‚

$x$ã¯æ•´æ•°ãªã®ã§ $\bar{x}$ ã¨ $\bar{x} - 1$ ã®é–“ã«ã¯æ•´æ•°ç‚¹ãŒå­˜åœ¨ã—ã¾ã›ã‚“ã€‚ãªã®ã§é’ã„ç›´ç·š $a'x + by = c'$ ã¯2ç‚¹ $(\bar{x}, (c - a\bar{x}) / b)$ åŠã³ $(\bar{x} -1, u/b )$ ã‚’é€šã‚Œã°è‰¯ã„ã“ã¨ãŒå›³ã‹ã‚‰ã‚ã‹ã‚Šã€æ¬¡ã®é€£ç«‹æ–¹ç¨‹å¼

$$
\begin{align*}
a' \bar{x} + c - a \bar{x} &= c' \\
a' (\bar{x} - 1) + u &= c'
\end{align*}
$$

ã‚’è§£ã„ã¦ $(a', c')$ ã‚’æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã®å€¤ã‚’ä½¿ã£ã¦åˆ¶ç´„æ¡ä»¶ã‚’ $a'x + by \leq c'$ ã«ç½®ãæ›ãˆã‚Œã°Coefficient strengtheningã®å®Œäº†ã§ã™ã€‚

# JijPresolve

JijPresolveã¯OMMX Instanceã«å¯¾ã™ã‚‹Presolveã‚’æä¾›ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚ç¾åœ¨ã¯ä¸»ã«æ¬¡ã®äºŒã¤ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚

- [SCIP/PaPILO](https://github.com/scipopt/papilo) ã«ã‚ˆã‚‹MILPå•é¡Œã®Presolve
- éç·šå½¢å•é¡Œã«ã‚‚é©ç”¨ã§ãã‚‹Trivial Presolve

:::message
å®Ÿéš›ã«ã¯åŒ…æ‹¬çš„ãª C API ã®è¿½åŠ ã¨å…±æœ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ã®ãƒ“ãƒ«ãƒ‰ãƒ»é…å¸ƒã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸãƒ•ã‚©ãƒ¼ã‚¯ [Jij-Inc/libpapilo](https://github.com/Jij-Inc/libpapilo) ã‚’ä½¿ã£ã¦ã„ã¾ã™
:::

JijPresolveã¯ç¾åœ¨[JijZept SDK/IDE](https://www.jijzept.com/ja/)ã®ä¸€éƒ¨ã¨ã—ã¦æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ä»¥ä¸‹ã®GitHub Pagesã§å…¬é–‹ã•ã‚Œèª°ã§ã‚‚é–²è¦§ã§ãã¾ã™ã€‚

https://jij-inc.github.io/JijPresolve/autoapi/jijpresolve/index.html

OMMXã®ã‚ˆã†ã«OSSã§ã¯ãªã„ã®ã§æ³¨æ„ã—ã¦ãã ã•ã„ã€‚JijPresolveã¯Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦æä¾›ã•ã‚Œã€OMMX Instanceã‚’å—ã‘å–ã£ã¦Presolveã•ã‚ŒãŸOMMX Instanceã‚’è¿”ã—ã¾ã™ã€‚ä»¥ä¸‹ã«ç°¡å˜ãªä½¿ç”¨ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚

```python
from ommx.v1 import DecisionVariable, Instance
import jijpresolve

x = [DecisionVariable.integer(i, lower=0, upper=10) for i in range(3)]
ommx_instance = Instance.from_components(
    decision_variables=x,
    objective=sum(x),
    constraints=[
        (x[0] + x[1] + x[2] <= 5).set_id(0),
    ],
    sense=Instance.MAXIMIZE,
)

presolved_instance, stats = jijpresolve.milp_presolve(ommx_instance)

print(stats['rounds'])  # 2
print(stats['deleted_columns'])  # 3
```

ã“ã‚Œã«ã‚ˆã‚ŠOMMXã§ã‚µãƒãƒ¼ãƒˆã•ã‚ŒãŸä»»æ„ã®ã‚½ãƒ«ãƒãƒ¼ã«å¯¾ã—ã¦Presolveã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

## Postsolve by OMMX

Presolveã¯æ±ºå®šå¤‰æ•°ã‚’å›ºå®šã—ãŸã‚Šåˆ¶ç´„æ¡ä»¶ã‚’å‰Šé™¤ãƒ»è¿½åŠ ã—ãŸã‚Šã€æœ€é©åŒ–å•é¡Œã«å¯¾ã—ã¦å¤§ããªå¤‰æ›´ã‚’åŠ ãˆã¾ã™ã€‚ã—ã‹ã—ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ãŒå…¥åŠ›ã—ãŸåˆ¶ç´„æ¡ä»¶ã‚„æ±ºå®šå¤‰æ•°ãŒã€ãŸã¨ãˆæ•°å­¦çš„ã«æ­£ã—ã„å¤‰å½¢ã ã¨ã—ã¦ã‚‚ã€ã€Œè‡ªåˆ†ãŒå…¥åŠ›ã—ãŸé€šã‚Šã®å½¢ã§ã€è§£ã‹ã‚Œã‚‹ã“ã¨ã‚’æœŸå¾…ã—ã¦ã„ã¾ã™ã€‚ã—ãŸãŒã£ã¦Presolveã—ã¦å¤‰å½¢ã—ãŸå•é¡Œã‚’ã‚½ãƒ«ãƒãƒ¼ã§è§£ã„ãŸå¾Œã«ã€Presolveå‰ã®å•é¡Œã«å¯¾ã™ã‚‹è§£ã‚’å¾©å…ƒã™ã‚‹ãŸã‚ã®å‡¦ç†ãŒå¿…è¦ã¨ãªã‚Šã€Postsolveã¨å‘¼ã°ã‚Œã¾ã™ã€‚JijPresolveã®ç‰¹å¾´ã¯ã“ã®PostsolveãŒOMMXã«ã‚ˆã£ã¦å®Ÿç¾ã•ã‚Œã¦ã„ã‚‹ç‚¹ã§ã™ã€‚

https://github.com/Jij-Inc/ommx

å®Ÿã¯OMMXã¨ã„ã†ã®ã¯Presolveã®é–‹ç™ºã®ãŸã‚ã«è¨­è¨ˆã•ã‚ŒãŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚Jijç¤¾å†…ã§å½“æ™‚ä½¿ã£ã¦ã„ãŸJijModelingã®å‡¦ç†ç³»ã«Presolveã‚’å®Ÿè£…ã™ã‚‹ã®ãŒç§ãŒJijã«å‚åŠ ã—ãŸå½“åˆã‹ã‚‰ã®é‡è¦ãªèª²é¡Œã§ã—ãŸã€‚ã“ã‚Œã¾ã§èª¬æ˜ã—ã¦ããŸé€šã‚ŠSCIPãªã©ã®æ—¢å­˜ã®MILPã‚½ãƒ«ãƒãƒ¼ã¯Presolveã‚’ã‹ãªã‚Šé«˜åº¦ã«æ´»ç”¨ã—ã¦ã„ã¾ã™ãŒã€ä¾‹ãˆã°OpenJijã¨ã„ã£ãŸQUBOã‚½ãƒ«ãƒãƒ¼ã¯Presolveãªã©ã¨ã„ã†æ•°ç†æœ€é©åŒ–ã®å°‚é–€çš„ãªæŠ€è¡“ã¯å…¨ãä½¿ã£ã¦ãŠã‚‰ãšã€æ—¢å­˜ã®ã‚½ãƒ«ãƒãƒ¼ã«æ¯”ã¹ã¦åŒã˜ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹ã«ç«‹ã¤ã“ã¨ã™ã‚‰å‡ºæ¥ã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚ç‰¹ã«MIPLIBã®ã‚ˆã†ãªã‚¢ã‚«ãƒ‡ãƒŸãƒƒã‚¯ãªãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚»ãƒƒãƒˆãªã©ã¯PresolveãŒè¡Œã‚ã‚ŒãŸçŠ¶æ…‹ã§æä¾›ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ãŒã€å®Ÿå‹™ã§ä½¿ã†å ´åˆã¯Presolveã‚’è¡Œã£ã¦ã„ãªã„å…ƒã®å•é¡ŒãŒä¸ãˆã‚‰ã‚Œã‚‹ã“ã¨ãŒå¤šã„ãŸã‚ã€Presolveã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã¯éå¸¸ã«é‡è¦ã§ã—ãŸã€‚

Presolve/Postsolveã®å®Ÿè£…ã«ãŠã„ã¦OMMXã®é‡è¦ãªè¨­è¨ˆæ€æƒ³ã®ä¸€ã¤ãŒãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã§ã™ã€‚ä¾‹ãˆã° PaPILO ã®ã‚ˆã†ãª Presolve Library ã¯æ¬¡ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã‚’å–ã‚Šã¾ã™ã€‚

```mermaid
sequenceDiagram
    actor User
    box rgb(255, 230, 200) Presolve Library
        participant Presolver
        participant Postsolver
    end
    participant Solver

    User->>Presolver: Original Problem
    Presolver-->>Postsolver: Postsolveæƒ…å ±
    Presolver->>Solver: Presolved Problem
    Solver->>Postsolver: Presolved Solution
    Postsolver->>User: Original Solution
```

ã“ã®ã‚ˆã†ã«ã€é€šå¸¸Postsolveã®æƒ…å ±ã‚’ã‚½ãƒ«ãƒãƒ¼ã«æ¸¡ã—ã¾ã›ã‚“ã€‚ã“ã‚Œã¯ã‚½ãƒ«ãƒãƒ¼ã¯ãã‚“ãªæƒ…å ±ã‚’å¿…è¦ã¨ã—ã¦ã„ãªã„ã®ã§è‡ªç„¶ãªè¨­è¨ˆã«è¦‹ãˆã¾ã™ãŒã€ã“ã®è¨­è¨ˆã ã¨ã‚½ãƒ«ãƒãƒ¼ã®è¿”ã—ãŸè§£ã‚’è§£é‡ˆã™ã‚‹ãŸã‚ã«Postsolverã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯åŒä¸€ãƒã‚·ãƒ³ä¸Šã§Presolveã‚’è¡Œã£ã¦Solverã§è§£ãPostsolveã‚’è¡Œã†å ´åˆã¯å•é¡Œã«ãªã‚Šã¾ã›ã‚“ãŒã€ä¾‹ãˆã°ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã§Presolveã¨Solverã‚’åˆ†é›¢ã—ãŸã„å ´åˆãªã©ã«ã¯ä¸ä¾¿ã§ã€Presolveã•ã‚ŒãŸå•é¡Œã¨Postsolveæƒ…å ±ã‚’ä¸€ç·’ã«ä¿å­˜ãƒ»è»¢é€ã™ã‚‹å¿…è¦ãŒå‡ºã¦ãã¾ã™ã€‚

ã“ã‚Œã‚’è¸ã¾ãˆã¦OMMXã§ã¯ `ommx.v1.Instance` ã«Presolveã•ã‚ŒãŸå•é¡Œè‡ªä½“ã«åŠ ãˆã¦ã€Postsolveã®ãŸã‚ã«å¿…è¦ãªæƒ…å ±ã¨ãã‚Œã‚’å®Ÿéš›ã«åæ˜ ã™ã‚‹æ©Ÿèƒ½ãŒã‚ã‚‰ã‹ã˜ã‚çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šæ¬¡ã®ã‚ˆã†ãªå˜ç´”ãªãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿç¾ã§ãã¾ã™ã€‚

```mermaid
sequenceDiagram
    actor User
    participant Presolver
    participant Solver
    participant SolutionStorage

    User->>Presolver: Original Problem
    Presolver->>Solver: Presolved Problem with Postsolve info
    Solver->>SolutionStorage: (Postsolved) Original Solution
    SolutionStorage->>User: Original Solution
```

# å‚è€ƒæ–‡çŒ®

- [Achterberg, T., Bixby, R. E., Gu, Z., Rothberg, E., & Weninger, D. (2016). Presolve reductions in mixed integer programming (ZIB Report 16-44). Zuse Institute Berlin.](https://opus4.kobv.de/opus4-zib/frontdoor/deliver/index/docId/6037/file/Presolve.pdf)

# æœ€å¾Œã«

Jijã§ã¯ä»Šå›ç´¹ä»‹ã—ãŸJijPresolveã®é–‹ç™ºã‚‚å«ã‚ã€å„ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚’ç©æ¥µçš„ã«æ¡ç”¨ã—ã¦ã„ã¾ã™ï¼

ç¾åœ¨ã®å‹Ÿé›†è·ç¨®ã¯ã€ä»¥ä¸‹ãƒªãƒ³ã‚¯ã‚ˆã‚Šã”è¦§ã„ãŸã ã‘ã¾ã™ã€‚
ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«é¢è«‡ã‹ã‚‰ã®ã‚¹ã‚¿ãƒ¼ãƒˆã‚‚å¤§æ­“è¿ã§ã™ã®ã§ã€ãŠæ°—è»½ã«ã”é€£çµ¡ãã ã•ã„ã€‚
https://open.talentio.com/r/1/c/j-ij.com/homes/1900
